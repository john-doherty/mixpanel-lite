/*!
 * mixpanel-lite.js - v1.5.8
 * Lightweight version of mixpanel-js with offline support
 * https://github.com/john-doherty/mixpanel-lite
 * @author John Doherty <www.johndoherty.info>
 * @license MIT
 */
!function(e,t){"use strict";if(e.localStorage)if(e.Promise){var n="https://api.mixpanel.com/track?ip=1&verbose=1&data=",i="https://api.mixpanel.com/engage?ip=1&verbose=1&data=",r=null,o=!1,a=!1,l=null,c=(new Date).getTime(),s=0,d={},u={_key:"mixpanel-lite",_maxLength:100,all:function(){return JSON.parse(localStorage.getItem(u._key)||"[]")},add:function(e){var t=u.all();s++,e._id=c+"-"+s,t.length+1>u._maxLength&&t.shift(),t.push(e),localStorage.setItem(u._key,JSON.stringify(t))},remove:function(e){var t=(e||[]).map(function(e){return e._id}),n=u.all().filter(function(e){return-1===t.indexOf(e._id)});localStorage.setItem(u._key,JSON.stringify(n))},clear:function(){localStorage.setItem(u._key,JSON.stringify([]))}},g={init:function(e,t){console.log("mixpanel.track('"+e+"',"+JSON.stringify(t||{})+")")},track:function(e,t){console.log("mixpanel.track('"+e+"',"+JSON.stringify(t||{})+")")},register:function(e){console.log("mixpanel.register("+JSON.stringify(e||{})+")")},reset:function(){console.log("mixpanel.reset()")},identify:function(e){console.log("mixpanel.identify('"+e+"')")},getProperty:function(e){console.log("mixpanel.getProperty('"+e+"')")},people:{set:function(e){console.log("mixpanel.people.set("+JSON.stringify(e||{})+")")}},mute:x,unmute:b,muted:!0},f={init:w,track:p,register:function(e){Object.keys(e||{}).forEach(function(t){null!==e[t]&&""!==e[t]?d[t]=e[t]:delete d[t]})},reset:function(){w(r),o&&console.log("mixpanel.reset()")},identify:function(e){e&&""!==e.trim()?(o&&console.log("mixpanel.identify('"+e+"')"),p("$identify",{$anon_distinct_id:d.distinct_id,distinct_id:e,$user_id:e}),d.distinct_id=e,d.$user_id=e):console.warn("mixpanel.identify: Invalid id")},getProperty:function(e){return d[e]},people:{set:function(e){if(e&&"object"==typeof e){var t={$token:r,$distinct_id:d.distinct_id,$set:{}};Object.keys(e||{}).forEach(function(n){t.$set[n]=e[n]}),Object.keys(t.$set).forEach(function(e){null!==t.$set[e]&&""!==t.$set[e]||delete t.$set[e]}),u.add(t),v(),o&&(console.log("mixpanel.people.set("+JSON.stringify(e||{})+")"),console.dir(t))}else console.warn("mixpanel.setPeople: Invalid data param, must be an object")}},mute:x,unmute:b,muted:!1};e.mixpanel=f,e.addEventListener(e.cordova?"deviceready":"load",v,{passive:!0}),e.addEventListener("online",v,{passive:!0})}else console.warn("mixpanel-lite: Promise not supported (try adding a polyfill)");else console.warn("mixpanel-lite: localStorage not supported");function m(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{};return e.effectiveType||e.type||""}function p(e,t){if(r)if(e&&""!==e)if(t&&"object"!=typeof t)console.warn("mixpanel.track: Data param must be an object");else{var n={event:e,properties:h(d)};Object.keys(t||{}).forEach(function(e){n.properties[e]=t[e]}),n.properties.$insert_id=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),n.properties.time=Math.round((new Date).getTime()/1e3),Object.keys(n.properties).forEach(function(e){null!==n.properties[e]&&""!==n.properties[e]||delete n.properties[e]}),u.add(n),v(),o&&(t?console.log("mixpanel.track('"+e+"',"+JSON.stringify(t||{})+")"):console.log("mixpanel.track('"+e+"')"),console.dir(n))}else console.warn("mixpanel.track: Invalid eventName");else console.warn("mixpanel.track: You must call mixpanel.init(token) first")}function v(){if(a)return l&&clearTimeout(l),void(l=setTimeout(v,500));var t=u.all();if(-1!==t.length){a=!0,l&&(clearTimeout(l),l=null);var r,c,s=t.map(function(t){return function(){var r=t.$set?i:n,o=h(t);delete o._id;var a,l=(a=JSON.stringify(o),e.btoa(unescape(encodeURIComponent(a))));return function(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e),i.withCredentials=!0,i.onreadystatechange=function(){4===i.readyState&&(200===i.status?t({url:e,status:200,body:i.responseText||""}):n({url:e,status:i.status,body:i.responseText||""}))},i.send()})}(r+=encodeURIComponent(l)+"&_="+(new Date).getTime()).then(function(){t.__completed=!0})}});(r=s,c=Promise.resolve(),r.forEach(function(e){c=c.then(e)}),c).then(function(){var e=t.filter(function(e){return e.__completed});u.remove(e),a=!1}).catch(function(e){o&&console.log(e),a=!1})}}function h(e){return JSON.parse(JSON.stringify(e))}function k(){var e=navigator.userAgent;return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""}function y(e,t){return-1!==e.indexOf(t)}function _(){var t=navigator.userAgent,n=navigator.vendor||"";return e.opera||y(t," OPR/")?y(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":y(t,"IEMobile")||y(t,"WPDesktop")?"Internet Explorer Mobile":y(t,"Edge")?"Microsoft Edge":y(t,"FBIOS")?"Facebook Mobile":y(t,"Chrome")?"Chrome":y(t,"CriOS")?"Chrome iOS":y(t,"UCWEB")||y(t,"UCBrowser")?"UC Browser":y(t,"FxiOS")?"Firefox iOS":y(n,"Apple")?y(t,"Mobile")?"Mobile Safari":"Safari":y(t,"Android")?"Android Mobile":y(t,"Konqueror")?"Konqueror":y(t,"Firefox")?"Firefox":y(t,"MSIE")||y(t,"Trident/")?"Internet Explorer":y(t,"Gecko")?"Mozilla":""}function S(){var e=_(),t=navigator.userAgent,n={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[e];if(void 0===n)return null;var i=t.match(n);return i?parseFloat(i[i.length-2]):null}function x(){e.mixpanel=g}function b(){e.mixpanel=f}function w(a,l){if(!0===(l=l||{}).mute&&(e.mixpanel=g),l.trackingUrl&&""!==l.trackingUrl&&(n=l.trackingUrl),l.engageUrl&&""!==l.engageUrl&&(i=l.engageUrl),""!==(a=String(a||""))){r=a,o=!0===l.debug;var c,s,u,f,p=(c=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},s=(screen.height*screen.width).toString(16),c()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,n=navigator.userAgent,i=[],r=0;function o(e,t){var n,r=0;for(n=0;n<t.length;n++)r|=i[n]<<8*n;return e^r}for(e=0;e<n.length;e++)t=n.charCodeAt(e),i.unshift(255&t),i.length>=4&&(r=o(r,i),i=[]);return i.length>0&&(r=o(r,i)),r.toString(16)}()+"-"+s+"-"+c());d={token:a,$os:(f=navigator.userAgent,/Windows/i.test(f)?/Phone/.test(f)||/WPDesktop/.test(f)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(f)?"iOS":/Android/.test(f)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(f)?"BlackBerry":/Mac/i.test(f)?"Mac OS X":/Linux/.test(f)?"Linux":/CrOS/.test(f)?"Chrome OS":""),$browser:_(),$browser_version:S(),$device:k(),$screen_height:screen.height,$screen_width:screen.width,$referrer:t.referrer,$referring_domain:(u=String(t.referrer||"").split("/"),u.length>=3?u[2]:""),distinct_id:p,$device_id:p,mp_lib:"mixpanel-lite",$lib_version:"1.5.8",language:navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"en"};var v=function(){var t=new URLSearchParams(e.location.search||""),n={};return t.has("utm_source")&&(n.source=t.get("utm_source")),t.has("utm_medium")&&(n.medium=t.get("utm_medium")),t.has("utm_campaign")&&(n.campaign=t.get("utm_campaign")),t.has("utm_term")&&(n.term=t.get("utm_term")),t.has("utm_content")&&(n.content=t.get("utm_content")),Object.keys(n).length>0?n:null}();v&&(d.utm=v);var h,y,x=(h=new URLSearchParams(e.location.search||""),y={},h.has("dclid")&&(y.doubleClickId=h.get("dclid")),h.has("fbclid")&&(y.facebookClickId=h.get("fbclid")),h.has("gclid")&&(y.googleClickId=h.get("gclid")),h.has("ko_click_id")&&(y.genericClickId=h.get("ko_click_id")),h.has("li_fat_id")&&(y.linkedInClickId=h.get("li_fat_id")),h.has("msclkid")&&(y.microsoftClickId=h.get("msclkid")),h.has("ttclid")&&(y.tikTokClickId=h.get("ttclid")),h.has("twclid")&&(y.twitterClickId=h.get("twclid")),h.has("wbraid")&&(y.webBrowserReferrerId=h.get("wbraid")),Object.keys(y).length>0?y:null);x&&(d.advert=x),0===String(e.location.protocol).indexOf("http")&&(d.$current_url=e.location.href),"1"===String(navigator.doNotTrack||"0")&&(d.doNotTrack=!0),e.device&&(e.device.manufacturer&&(d.$manufacturer=e.device.manufacturer),e.device.model&&(d.$model=e.device.model),e.device.version&&(d.$os_version=e.device.version)),d.connectionType=m();var b=navigator.connection||navigator.mozConnection||navigator.webkitConnection;b&&b.addEventListener&&b.addEventListener("change",function(){d.connectionType=m()}),o&&console.log("mixpanel.init('"+r+"')")}else console.warn("mixpanel.init: invalid token")}}(this,document);